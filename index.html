<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>JokeFi News - Crypto Universe</title>
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: radial-gradient(circle at center, #1a0b3d 0%, #000000 100%);
      color: #ffffff;
      text-align: center;
      overflow-x: hidden;
      position: relative;
      height: 100vh;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
      transition: background 0.5s, color 0.5s;
    }
    body.light {
      background: radial-gradient(circle at center, #f0f0f0 0%, #ffffff 100%);
      color: #000000;
    }
    .space-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      transition: opacity 0.5s;
    }
    body.light .space-bg { opacity: 0; }
    .star {
      position: absolute;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      animation: floatStars linear infinite, twinkle 1s infinite alternate;
      cursor: pointer;
    }
    @keyframes twinkle { 0% { opacity: 0.5; } 100% { opacity: 1; } }
    .star.explode { animation: explode 0.5s forwards; }
    @keyframes explode { 0% { transform: scale(1); } 100% { transform: scale(2); opacity: 0; } }
    .nebula {
      position: absolute;
      background: radial-gradient(circle, rgba(106, 0, 244, 0.4), transparent);
      width: 150px;
      height: 150px;
      animation: pulseNebula 8s ease-in-out infinite;
    }
    .comet {
      position: absolute;
      width: 3px;
      height: 20px;
      background: linear-gradient(to bottom, rgba(255, 255, 255, 0.9), transparent);
      animation: shootComet 5s linear infinite;
    }
    @keyframes floatStars { 0% { transform: translateY(100vh) scale(1); opacity: 0.8; } 50% { opacity: 1; } 100% { transform: translateY(-20vh) scale(0.5); opacity: 0; } }
    @keyframes pulseNebula { 0% { transform: scale(1); opacity: 0.3; } 50% { transform: scale(1.3); opacity: 0.5; } 100% { transform: scale(1); opacity: 0.3; } }
    @keyframes shootComet { 0% { transform: translate(100vw, 100vh) rotate(-45deg); opacity: 1; } 100% { transform: translate(-100vw, -100vh) rotate(-45deg); opacity: 0; } }
    header {
      padding: 10px;
      background: linear-gradient(90deg, #6a00f4, #00c3ff);
      font-size: 15px;
      font-weight: 700;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
      animation: slideIn 0.5s ease-out, gradientAnim 5s infinite alternate;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }
    @keyframes gradientAnim { 0% { background-position: 0%; } 100% { background-position: 100%; } }
    @keyframes slideIn { from { transform: translateY(-100%); } to { transform: translateY(0); } }
    header span { animation: letterAnim 2s infinite; }
    @keyframes letterAnim { 0% { transform: translateY(0); } 50% { transform: translateY(-2px); } 100% { transform: translateY(0); } }
    header button { background: none; border: none; color: white; font-size: 16px; cursor: pointer; }
    body.light header { background: linear-gradient(90deg, #00c3ff, #6a00f4); color: #000; }
    .crypto-ticker {
      padding: 5px;
      background: rgba(0, 0, 0, 0.3);
      font-size: 12px;
      position: sticky;
      top: 40px;
      z-index: 999;
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    body.light .crypto-ticker { background: rgba(255, 255, 255, 0.3); color: #000; }
    .search-bar { margin: 10px; }
    .search-bar input { width: 90%; padding: 8px; border-radius: 20px; border: none; }
    .user-tweet-form { margin: 10px; }
    .user-tweet-form input { width: 70%; padding: 8px; border-radius: 20px; border: none; }
    .user-tweet-form button { padding: 8px; border-radius: 20px; background: #ff0080; color: white; border: none; }
    .post-btn { /* ... same as before, with img */ }
    .tweet-box {
      margin: 10px auto;
      max-width: 95%;
      padding: 6px;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.05);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);
      animation: starburst 0.8s ease-in-out;
      position: relative;
      overflow: hidden;
      border: 1px solid transparent;
      transition: border 0.3s, max-height 0.3s;
    }
    @keyframes starburst { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
    .tweet-box:hover { border: 1px solid #ff0080; box-shadow: 0 0 10px #ff0080; }
    .tweet-box.collapsed { max-height: 100px; overflow: hidden; }
    body.light .tweet-box { background: rgba(0, 0, 0, 0.05); }
    .tweet-actions { display: flex; gap: 10px; justify-content: center; }
    .like-btn, .share-btn, .reaction-btn, .bookmark-btn, .delete-btn { background: none; border: none; color: white; cursor: pointer; }
    body.light .like-btn, body.light .share-btn, body.light .reaction-btn, body.light .bookmark-btn, body.light .delete-btn { color: black; }
    .loading { display: flex; justify-content: center; margin: 20px; }
    .spinner { border: 4px solid rgba(255,255,255,0.3); border-top: 4px solid white; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    #topBtn { position: fixed; bottom: 20px; right: 20px; display: none; background: #ff0080; color: white; border: none; padding: 10px; border-radius: 50%; cursor: pointer; }
    .offline { position: fixed; bottom: 0; width: 100%; background: red; color: white; padding: 10px; display: none; }
    @media (min-width: 320px) and (max-width: 480px) {
      header { font-size: 14px; padding: 8px; }
      .post-btn { font-size: 12px; padding: 7px 14px; }
      .tweet-box { padding: 5px; margin: 8px auto; }
      .nebula { width: 100px; height: 100px; }
      .comet { height: 15px; }
    }
  </style>
</head>
<body>
  <div class="space-bg"></div>
  <div class="refresh-overlay" id="refreshOverlay">Refreshing...</div>
  <div class="offline" id="offlineMsg">No internet connection. Check your network.</div>
  <header>
    <span class="header-icon">üöÄ</span> JokeFi News - Crypto Universe
    <button id="themeToggle">üåó</button>
  </header>
  <div class="crypto-ticker">
    <span>BTC: $108,887.49</span>
    <span>ETH: $4,469.29</span>
  </div>
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search tweets...">
  </div>
  <div class="user-tweet-form">
    <input type="text" id="userTweetInput" placeholder="Enter tweet URL...">
    <button onclick="addUserTweet()">Add Tweet</button>
  </div>
  <a class="post-btn" href="https://twitter.com/intent/tweet?text=üåå%20Dive%20into%20JokeFi%20News%20-%20The%20ultimate%20mobile%20platform%20for%20crypto%20enthusiasts!%20Get%20real-time%20Twitter%20updates,%20track%20market%20trends,%20and%20explore%20exclusive%20Web3%20insights.%20Featuring%20Eastpoint%20Seoul%202025%20sponsors%20like%20Sui,%20Solana,%20and%20more!%20Join%20now!%20üî•%0A%0Ahttps%3A%2F%2Fjoke-fi-nu.vercel.app%2F%20%23JokeFi%20%23CryptoNews%20%23Web3%20%23Blockchain" target="_blank">
    ‚úçÔ∏è Share JokeFi News
  </a>
  <div class="loading"><div class="spinner"></div></div>
  <div class="tweets" id="tweetsSection" style="display:none;">
    <div id="userTweets"></div>
    <div class="tweet-box" data-tweet-id="0"><blockquote class="twitter-tweet" data-theme="dark"><a href="https://twitter.com/GoKiteAI/status/1961903026761052434?t=DbwEglufqAkgLRDM9RqTTQ&s=19"></a><div class="tweet-fallback">Loading tweet...</div></blockquote><div class="tweet-actions"><button class="like-btn" onclick="likeTweet(0)">‚ù§Ô∏è <span class="like-count">0</span></button><button class="share-btn" onclick="shareTweet('https://twitter.com/GoKiteAI/status/1961903026761052434')">üîó Share</button><button class="reaction-btn" onclick="addReaction(0, 'üòÇ')">üòÇ</button><button class="bookmark-btn" onclick="bookmarkTweet(0)">üîñ</button></div></div>
    <!-- Add all other tweets similarly -->
    <div class="tweet-box" data-tweet-id="25"><blockquote class="twitter-tweet" data-theme="dark"><a href="https://twitter.com/cryptocom/status/1961666997831569528?t=4O53W-P44yBvB8FmXl_USw&s=19"></a><div class="tweet-fallback">Loading tweet...</div></blockquote><div class="tweet-actions"><button class="like-btn" onclick="likeTweet(25)">‚ù§Ô∏è <span class="like-count">0</span></button><button class="share-btn" onclick="shareTweet('https://twitter.com/cryptocom/status/1961666997831569528')">üîó Share</button><button class="reaction-btn" onclick="addReaction(25, 'üòÇ')">üòÇ</button><button class="bookmark-btn" onclick="bookmarkTweet(25)">üîñ</button></div></div>
  </div>
  <button id="topBtn" onclick="topFunction()">‚¨ÜÔ∏è</button>
  <script>
    // Space Elements
    function createSpaceElements() {
      const spaceBg = document.querySelector('.space-bg');
      for (let i = 0; i < 30; i++) {
        let star = document.createElement('div');
        star.className = 'star';
        star.style.width = `${Math.random() * 3 + 1}px`;
        star.style.height = star.style.width;
        star.style.top = `${Math.random() * 100}%`;
        star.style.left = `${Math.random() * 100}%`;
        star.style.animationDuration = `${Math.random() * 4 + 3}s`;
        star.style.background = `hsl(${Math.random() * 360}, 70%, 80%)`;
        star.onclick = () => star.classList.add('explode');
        spaceBg.appendChild(star);
      }
      for (let i = 0; i < 3; i++) {
        let nebula = document.createElement('div');
        nebula.className = 'nebula';
        nebula.style.top = `${Math.random() * 80}%`;
        nebula.style.left = `${Math.random() * 80}%`;
        nebula.style.animationDelay = `${Math.random() * 5}s`;
        nebula.style.background = `radial-gradient(circle, hsl(${Math.random() * 360}, 50%, 50%), transparent)`;
        nebula.onclick = () => nebula.style.opacity = nebula.style.opacity === '0' ? '1' : '0';
        spaceBg.appendChild(nebula);
      }
      for (let i = 0; i < 2; i++) {
        let comet = document.createElement('div');
        comet.className = 'comet';
        comet.style.left = `${Math.random() * 80}%`;
        comet.style.animationDuration = `${Math.random() * 3 + 4}s`;
        comet.style.animationDelay = `${Math.random() * 3}s`;
        spaceBg.appendChild(comet);
      }
    }
    createSpaceElements();

    // Tweet Loading
    window.addEventListener('load', () => {
      document.querySelector('.loading').style.display = 'none';
      document.getElementById('tweetsSection').style.display = 'block';
      if (window.twttr) {
        window.twttr.widgets.load();
        setTimeout(() => {
          document.querySelectorAll('.twitter-tweet').forEach(tweet => {
            if (!tweet.querySelector('iframe')) {
              tweet.querySelector('.tweet-fallback').textContent = 'Tweet failed to load. Check the URL or try again later.';
            } else {
              tweet.querySelector('.tweet-fallback').style.display = 'none';
            }
          });
        }, 3000);
      }
      loadUserTweets();
      loadLikes();
      loadBookmarks();
      loadReactions();
    });

    // User Tweets
    function addUserTweet() {
      const input = document.getElementById('userTweetInput').value;
      if (!input.match(/https:\/\/(twitter|x)\.com\/.*\/status\/\d+/)) {
        alert('Please enter a valid tweet URL!');
        return;
      }
      const tweets = JSON.parse(localStorage.getItem('userTweets') || '[]');
      if (tweets.length >= 10) {
        alert('Max 10 user tweets allowed!');
        return;
      }
      const tweetUrl = input.replace('x.com', 'twitter.com');
      tweets.push({ url: tweetUrl, timestamp: new Date().toLocaleString() });
      localStorage.setItem('userTweets', JSON.stringify(tweets));
      loadUserTweets();
      document.getElementById('userTweetInput').value = '';
    }

    function loadUserTweets() {
      const userTweetsDiv = document.getElementById('userTweets');
      const tweets = JSON.parse(localStorage.getItem('userTweets') || '[]');
      userTweetsDiv.innerHTML = `<h3>User-Submitted Tweets (${tweets.length})</h3>`;
      tweets.forEach((tweet, index) => {
        const tweetBox = document.createElement('div');
        tweetBox.className = 'tweet-box user-tweet';
        tweetBox.dataset.tweetId = `user_${index}`;
        tweetBox.innerHTML = `
          <blockquote class="twitter-tweet" data-theme="dark">
            <a href="${tweet.url}"></a>
            <div class="tweet-fallback">Loading user tweet...</div>
          </blockquote>
          <div class="tweet-actions">
            <button class="like-btn" onclick="likeTweet('user_${index}')">‚ù§Ô∏è <span class="like-count">0</span></button>
            <button class="share-btn" onclick="shareTweet('${tweet.url}')">üîó Share</button>
            <button class="reaction-btn" onclick="addReaction('user_${index}', 'üòÇ')">üòÇ</button>
            <button class="bookmark-btn" onclick="bookmarkTweet('user_${index}')">üîñ</button>
            <button class="delete-btn" onclick="deleteUserTweet(${index})">üóë</button>
            <span>${tweet.timestamp}</span>
          </div>`;
        userTweetsDiv.appendChild(tweetBox);
      });
      if (window.twttr) window.twttr.widgets.load();
    }

    function deleteUserTweet(index) {
      const tweets = JSON.parse(localStorage.getItem('userTweets') || '[]');
      tweets.splice(index, 1);
      localStorage.setItem('userTweets', JSON.stringify(tweets));
      loadUserTweets();
    }

    // Theme Toggle
    document.getElementById('themeToggle').addEventListener('click', () => {
      document.body.classList.toggle('light');
      localStorage.setItem('theme', document.body.classList.contains('light') ? 'light' : 'dark');
    });
    if (localStorage.getItem('theme') === 'light') document.body.classList.add('light');

    // Search Tweets
    document.getElementById('searchInput').addEventListener('input', () => {
      const input = document.getElementById('searchInput').value.toLowerCase();
      document.querySelectorAll('.tweet-box').forEach(box => {
        const text = box.innerText.toLowerCase();
        box.style.display = text.includes(input) ? 'block' : 'none';
      });
      const searches = JSON.parse(localStorage.getItem('searchHistory') || '[]');
      if (input && !searches.includes(input)) {
        searches.push(input);
        localStorage.setItem('searchHistory', JSON.stringify(searches));
      }
    });

    // Likes, Reactions, Bookmarks
    function likeTweet(id) {
      const countEl = document.querySelector(`[data-tweet-id="${id}"] .like-count`);
      let likes = parseInt(countEl.textContent) + 1;
      countEl.textContent = likes;
      localStorage.setItem(`like_${id}`, likes);
    }

    function addReaction(id, emoji) {
      const reactionEl = document.querySelector(`[data-tweet-id="${id}"] .reaction-btn`);
      reactionEl.textContent = emoji;
      const reactions = JSON.parse(localStorage.getItem(`reactions_${id}`) || '{}');
      reactions[emoji] = (reactions[emoji] || 0) + 1;
      localStorage.setItem(`reactions_${id}`, JSON.stringify(reactions));
    }

    function bookmarkTweet(id) {
      const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
      if (!bookmarks.includes(id)) {
        bookmarks.push(id);
        localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
      }
    }

    function loadLikes() { /* ... same as before */ }
    function loadBookmarks() { /* ... similar logic for bookmarks */ }
    function loadReactions() { /* ... similar logic for reactions */ }

    // Back to Top
    window.onscroll = () => { document.getElementById('topBtn').style.display = (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) ? 'block' : 'none'; };
    function topFunction() { document.body.scrollTop = 0; document.documentElement.scrollTop = 0; }

    // Offline Detection
    if (!navigator.onLine) document.getElementById('offlineMsg').style.display = 'block';
    window.addEventListener('offline', () => document.getElementById('offlineMsg').style.display = 'block');
    window.addEventListener('online', () => document.getElementById('offlineMsg').style.display = 'none');

    // Auto Reload
    setTimeout(() => location.reload(), 300000);

    // Pull-to-Refresh
    let touchStartY = 0;
    let touchEndY = 0;
    document.addEventListener('touchstart', e => {
      touchStartY = e.changedTouches[0].screenY;
    });
    document.addEventListener('touchend', e => {
      touchEndY = e.changedTouches[0].screenY;
      if (touchStartY - touchEndY < -100 && window.scrollY === 0) {
        document.getElementById('refreshOverlay').style.display = 'flex';
        setTimeout(() => location.reload(), 1000);
      }
    });

    // Lazy Load Tweets
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          window.twttr.widgets.load(entry.target);
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    document.querySelectorAll('.tweet-box').forEach(tweet => observer.observe(tweet));
  </script>
</body>
</html>
