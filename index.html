<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ultimate Mobile UI</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: linear-gradient(45deg, #1a1a1a, #fffdd0, #1a1a1a, #fffdd0);
      background-size: 400%;
      animation: bgAnimation 10s ease infinite;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      transition: background 0.5s ease;
      overflow: hidden;
    }
    .white-theme { background: linear-gradient(45deg, #fffdd0, #ffffff, #fffdd0, #ffffff); background-size: 400%; animation: bgAnimation 10s ease infinite; }
    @keyframes bgAnimation { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    .phone {
      width: 360px;
      height: 740px;
      background: #000;
      border-radius: 40px;
      padding: 10px;
      box-shadow: 0 0 50px rgba(0,0,0,0.8), inset 0 0 10px rgba(255,255,255,0.1);
      position: relative;
      border: 4px solid #222;
      overflow: hidden;
      transition: opacity 0.3s;
    }
    .status-bar {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 30px;
      background: #000;
      color: #fff;
      display: flex;
      justify-content: space-between;
      padding: 5px 15px;
      font-size: 12px;
      z-index: 10;
    }
    .notch {
      position: absolute;
      top: 5px;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 25px;
      background: #000;
      border-radius: 20px;
    }
    .lock-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c') no-repeat center/cover;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      color: #fff;
      z-index: 20;
      animation: wallpaperSlide 20s infinite;
    }
    @keyframes wallpaperSlide { 0% { background-image: url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c'); } 50% { background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e'); } 100% { background-image: url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c'); } }
    .lock-screen h1 { margin-top: 80px; font-size: 24px; text-shadow: 0 2px 5px rgba(0,0,0,0.5); }
    .lock-screen input, .lock-screen button { background: rgba(255,255,255,0.2); color: #fff; border: none; padding: 10px 20px; border-radius: 20px; margin: 5px; }
    .home-screen, .app-screen {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      gap: 10px;
      padding: 40px 20px;
      height: calc(100% - 30px);
      margin-top: 30px;
      background: linear-gradient(135deg, #333, #000);
      background-size: 200%;
      animation: appBgAnimation 15s ease infinite;
      overflow-y: auto;
      border-radius: 20px;
    }
    @keyframes appBgAnimation { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    .app-screen { display: none; }
    .app-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(145deg, #444, #222);
      border-radius: 15px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 30px;
      color: #fff;
      cursor: pointer;
      flex-direction: column;
      transition: transform 0.3s, box-shadow 0.3s;
      box-shadow: 0 4px 15px rgba(0,0,0,0.6);
      position: relative;
    }
    .app-icon:hover { transform: scale(1.2); box-shadow: 0 6px 20px rgba(255,255,255,0.4); }
    .app-icon .badge { position: absolute; top: -5px; right: -5px; background: red; color: #fff; border-radius: 50%; padding: 2px 6px; font-size: 10px; }
    .app-name { color: #fff; font-size: 10px; text-align: center; margin-top: 5px; text-shadow: 0 1px 3px rgba(0,0,0,0.5); }
    .app-content { color: #fff; padding: 15px; font-size: 14px; animation: slideIn 0.3s ease; }
    @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    .theme-toggle, .back-btn, .action-btn {
      margin: 8px 0;
      background: linear-gradient(45deg, #555, #333);
      color: #fff;
      padding: 8px 15px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: transform 0.2s;
    }
    .theme-toggle:hover, .back-btn:hover, .action-btn:hover { transform: scale(1.05); }
    .theme-animation { animation: themeChange 0.6s ease; }
    @keyframes themeChange { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(360deg); } }
    .notification {
      position: absolute;
      top: 40px;
      width: 90%;
      left: 5%;
      background: rgba(255,255,255,0.9);
      color: #000;
      padding: 10px;
      border-radius: 10px;
      display: none;
      z-index: 15;
      animation: slideDown 0.5s ease;
    }
    @keyframes slideDown { from { transform: translateY(-100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .dock {
      position: absolute;
      bottom: 10px;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: 15px;
    }
    .widget { background: rgba(255,255,255,0.2); padding: 10px; border-radius: 10px; text-align: center; margin-bottom: 10px; }
    .context-menu {
      position: absolute;
      background: #333;
      color: #fff;
      border-radius: 10px;
      padding: 10px;
      display: none;
      z-index: 20;
    }
    .quick-settings {
      position: absolute;
      top: 30px;
      width: 100%;
      background: rgba(0,0,0,0.8);
      color: #fff;
      padding: 10px;
      display: none;
      z-index: 15;
    }
  </style>
</head>
<body>
  <div class="phone" id="phone">
    <!-- Status Bar -->
    <div class="status-bar">
      <span id="time">5:37 PM</span>
      <span id="status">üîã <span id="battery">85%</span> | üì∂ <span id="network">4G</span> | <span id="wifi">üì°</span> | <span id="bluetooth">üîµ</span> | <span id="airplane">‚úàÔ∏è</span></span>
    </div>
    <div class="notch"></div>

    <!-- Lock Screen -->
    <div class="lock-screen" id="lock-screen">
      <h1 id="lock-time">5:37 PM</h1>
      <div id="lock-date">Sep 3, 2025</div>
      <div class="widget">Weather: Sunny, 25¬∞C</div>
      <div class="widget">Event: Meeting at 6 PM</div>
      <input type="password" id="pin" placeholder="Enter PIN">
      <button onclick="unlockPhone()">Unlock</button>
      <button onclick="faceUnlock()">Face Unlock</button>
      <button onclick="emergencyCall()">Emergency</button>
      <button onclick="openApp('camera')">Camera</button>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">New message from Elon!</div>

    <!-- Quick Settings -->
    <div class="quick-settings" id="quick-settings">
      <button class="action-btn" onclick="toggleWifi()">Wi-Fi</button>
      <button class="action-btn" onclick="toggleBluetooth()">Bluetooth</button>
      <button class="action-btn" onclick="toggleAirplane()">Airplane</button>
      <button class="action-btn" onclick="toggleFlashlight()">Flashlight</button>
    </div>

    <!-- Home Screen -->
    <div class="home-screen" id="home" style="display: none;">
      <input type="text" id="app-search" placeholder="Search apps..." oninput="searchApps()" style="width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 10px;">
      <div class="widget">Weather: Sunny, 25¬∞C | Calendar: Meeting at 6 PM</div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'tomato')" onclick="openApp('tomato')"><span>üçÖ</span><div class="app-name">Tomato</div><span class="badge">2</span></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'chart')" onclick="openApp('chart')"><span>üìà</span><div class="app-name">Chart</div></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'contact')" onclick="openApp('contact')"><span>‚òéÔ∏è</span><div class="app-name">Contact</div><span class="badge">5</span></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'ai-bot')" onclick="openApp('ai-bot')"><span>ü§ñ</span><div class="app-name">AI Bot</div></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'setting')" onclick="openApp('setting')"><span>‚öôÔ∏è</span><div class="app-name">Setting</div></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'camera')" onclick="openApp('camera')"><span>üì∑</span><div class="app-name">Camera</div></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'music')" onclick="openApp('music')"><span>üéµ</span><div class="app-name">Music</div></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'notes')" onclick="openApp('notes')"><span>üìù</span><div class="app-name">Notes</div></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'calculator')" onclick="openApp('calculator')"><span>üßÆ</span><div class="app-name">Calculator</div></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'weather')" onclick="openApp('weather')"><span>‚õÖ</span><div class="app-name">Weather</div></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'alarm')" onclick="openApp('alarm')"><span>‚è∞</span><div class="app-name">Alarm</div></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'timer')" onclick="openApp('timer')"><span>‚è≤Ô∏è</span><div class="app-name">Timer</div></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'stopwatch')" onclick="openApp('stopwatch')"><span>‚è±Ô∏è</span><div class="app-name">Stopwatch</div></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'messages')" onclick="openApp('messages')"><span>üí¨</span><div class="app-name">Messages</div><span class="badge">3</span></div>
      <div class="app-icon" oncontextmenu="showContextMenu(event, 'browser')" onclick="openApp('browser')"><span>üåê</span><div class="app-name">Browser</div></div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="context-menu">
      <div onclick="uninstallApp()">Uninstall</div>
      <div onclick="appInfo()">Info</div>
      <div onclick="addToFolder()">Add to Folder</div>
    </div>

    <!-- Tomato App -->
    <div class="app-screen" id="tomato">
      <div class="app-content">
        <h2>Tomato Game</h2>
        <p>Pop tomatoes to score!</p>
        <select id="tomato-difficulty"><option value="easy">Easy</option><option value="hard">Hard</option></select>
        <select id="tomato-skin"><option value="red">Red Tomato</option><option value="green">Green Tomato</option><option value="yellow">Yellow Tomato</option></select>
        <button class="action-btn" onclick="playTomato()">Pop üçÖ</button>
        <p id="tomato-score">Score: 0</p>
        <p id="tomato-high-score">High Score: 0</p>
        <button class="action-btn" onclick="startTimeTrial()">Time Trial</button>
        <button class="action-btn" onclick="resetTomato()">Reset</button>
        <button class="action-btn" onclick="shareScore()">Share</button>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Chart App -->
    <div class="app-screen" id="chart">
      <div class="app-content">
        <h2>Crypto Charts</h2>
        <select id="coin-select" onchange="updateChart()">
          <option value="bitcoin">Bitcoin</option>
          <option value="ethereum">Ethereum</option>
          <option value="ripple">XRP</option>
          <option value="cardano">Cardano</option>
        </select>
        <select id="chart-timeframe"><option value="1h">1H</option><option value="1d">1D</option><option value="1w">1W</option></select>
        <iframe id="chart-frame" src="https://www.coindesk.com/price/bitcoin" width="100%" height="400"></iframe>
        <button class="action-btn" onclick="setPriceAlert()">Set Alert</button>
        <button class="action-btn" onclick="addToWatchlist()">Add to Watchlist</button>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Contacts App -->
    <div class="app-screen" id="contact">
      <div class="app-content">
        <h2>Contacts</h2>
        <input type="text" id="search-contact" placeholder="Search contacts..." oninput="searchContacts()">
        <ul id="contact-list">
          <li>Robin: 123-456-7890</li>
          <li>Elon: 234-567-8901</li>
          <li>Boss: 345-678-9012</li>
          <li>Wife: 456-789-0123</li>
          <li>Friend: 567-890-1234</li>
        </ul>
        <input type="text" id="new-contact" placeholder="Name: Number">
        <button class="action-btn" onclick="addContact()">Add Contact</button>
        <button class="action-btn" onclick="videoCall()">Video Call</button>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- AI Bot App -->
    <div class="app-screen" id="ai-bot">
      <div class="app-content">
        <h2>AI Bots</h2>
        <select id="bot-select" onchange="showBotChat()">
          <option value="bot1">Grok</option>
          <option value="bot2">Siri</option>
          <option value="bot3">Alexa</option>
          <option value="bot4">Cortana</option>
          <option value="bot5">Bixby</option>
        </select>
        <div id="bot-chat" style="margin-top:10px;">
          <p>Grok: Ask me anything!</p>
          <p>Q1: Weather? A: Sunny!</p>
          <p>Q2: Food? A: Pizza!</p>
          <p>Q3: Color? A: Blue!</p>
        </div>
        <input type="text" id="bot-input" placeholder="Ask a question..." onkeydown="handleBotInput(event)">
        <button class="action-btn" onclick="voiceInput()">Voice</button>
        <button class="action-btn" onclick="quickCommand()">Quick Command</button>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Settings App -->
    <div class="app-screen" id="setting">
      <div class="app-content">
        <h2>Settings</h2>
        <p>Battery: <span id="battery-status">85%</span></p>
        <p>Date: <input type="date" id="custom-date" onchange="setCustomDate()"></p>
        <p>Wi-Fi: <input type="checkbox" id="wifi-toggle" onchange="toggleWifi()"></p>
        <p>Bluetooth: <input type="checkbox" id="bluetooth-toggle" onchange="toggleBluetooth()"></p>
        <p>Airplane Mode: <input type="checkbox" id="airplane-mode" onchange="toggleAirplane()"></p>
        <p>Sound Profile: <select id="sound-profile"><option value="loud">Loud</option><option value="silent">Silent</option><option value="vibrate">Vibrate</option></select></p>
        <p>Ringtone: <select id="ringtone"><option value="default">Default</option><option value="chime">Chime</option><option value="bell">Bell</option></select></p>
        <p>Volume: <input type="range" id="volume" min="0" max="100" value="50" oninput="adjustVolume()"></p>
        <p>Screen Timeout: <select id="timeout"><option value="30">30s</option><option value="60">60s</option></select></p>
        <p>Wallpaper: <select id="wallpaper" onchange="changeWallpaper()"><option value="1">Default</option><option value="2">Nature</option><option value="3">City</option></select></p>
        <p>Font Size: <select id="font-size" onchange="changeFontSize()"><option value="14">Normal</option><option value="16">Large</option></select></p>
        <p>Location: <input type="checkbox" id="location-toggle" onchange="toggleLocation()"></p>
        <p>Battery Saver: <input type="checkbox" id="battery-saver" onchange="toggleBatterySaver()"></p>
        <button class="theme-toggle" onclick="toggleTheme()">Toggle Theme</button>
        <button class="action-btn" onclick="lockPhone()">Lock Phone</button>
        <button class="action-btn" onclick="resetSettings()">Reset Settings</button>
        <button class="action-btn" onclick="checkUpdate()">Check Update</button>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Camera App -->
    <div class="app-screen" id="camera">
      <div class="app-content">
        <h2>Camera</h2>
        <video id="camera-feed" autoplay style="width:100%; border-radius:10px;"></video>
        <button class="action-btn" onclick="capturePhoto()">Capture</button>
        <button class="action-btn" onclick="switchCamera()">Switch Camera</button>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Music App -->
    <div class="app-screen" id="music">
      <div class="app-content">
        <h2>Music</h2>
        <select id="song-select" onchange="playSong()">
          <option value="song1">Epic Track</option>
          <option value="song2">Chill Vibes</option>
          <option value="song3">Pop Hit</option>
          <option value="song4">Rock Anthem</option>
          <option value="song5">Jazz Groove</option>
          <option value="song6">Classical Symphony</option>
        </select>
        <div id="music-visualizer" style="width:100%; height:50px; background:linear-gradient(90deg, #555, #333); border-radius:10px;"></div>
        <audio id="music-player" controls></audio>
        <button class="action-btn" onclick="toggleShuffle()">Shuffle</button>
        <button class="action-btn" onclick="toggleRepeat()">Repeat</button>
        <button class="action-btn" onclick="addToPlaylist()">Add to Playlist</button>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Notes App -->
    <div class="app-screen" id="notes">
      <div class="app-content">
        <h2>Notes</h2>
        <textarea id="note-text" placeholder="Write a note..." rows="5" style="width:100%; border-radius:10px;"></textarea>
        <button class="action-btn" onclick="saveNote()">Save Note</button>
        <div id="notes-list"></div>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Calculator App -->
    <div class="app-screen" id="calculator">
      <div class="app-content">
        <h2>Calculator</h2>
        <input type="text" id="calc-display" readonly style="width:100%; padding:10px; border-radius:10px; margin-bottom:10px;">
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px;">
          <button class="action-btn" onclick="calc('1')">1</button>
          <button class="action-btn" onclick="calc('2')">2</button>
          <button class="action-btn" onclick="calc('3')">3</button>
          <button class="action-btn" onclick="calc('+')">+</button>
          <button class="action-btn" onclick="calc('4')">4</button>
          <button class="action-btn" onclick="calc('5')">5</button>
          <button class="action-btn" onclick="calc('6')">6</button>
          <button class="action-btn" onclick="calc('-')">-</button>
          <button class="action-btn" onclick="calc('7')">7</button>
          <button class="action-btn" onclick="calc('8')">8</button>
          <button class="action-btn" onclick="calc('9')">9</button>
          <button class="action-btn" onclick="calc('*')">*</button>
          <button class="action-btn" onclick="calc('0')">0</button>
          <button class="action-btn" onclick="calc('C')">C</button>
          <button class="action-btn" onclick="calc('=')">=</button>
          <button class="action-btn" onclick="calc('/')">/</button>
        </div>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Weather App -->
    <div class="app-screen" id="weather">
      <div class="app-content">
        <h2>Weather</h2>
        <p>Today: Sunny, 25¬∞C</p>
        <p>Tomorrow: Cloudy, 22¬∞C</p>
        <button class="action-btn" onclick="refreshWeather()">Refresh</button>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Alarm App -->
    <div class="app-screen" id="alarm">
      <div class="app-content">
        <h2>Alarm</h2>
        <input type="time" id="alarm-time">
        <button class="action-btn" onclick="setAlarm()">Set Alarm</button>
        <div id="alarm-list"></div>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Timer App -->
    <div class="app-screen" id="timer">
      <div class="app-content">
        <h2>Timer</h2>
        <input type="number" id="timer-minutes" placeholder="Minutes">
        <button class="action-btn" onclick="startTimer()">Start</button>
        <button class="action-btn" onclick="pauseTimer()">Pause</button>
        <p id="timer-display">00:00</p>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Stopwatch App -->
    <div class="app-screen" id="stopwatch">
      <div class="app-content">
        <h2>Stopwatch</h2>
        <p id="stopwatch-display">00:00:00</p>
        <button class="action-btn" onclick="startStopwatch()">Start</button>
        <button class="action-btn" onclick="stopStopwatch()">Stop</button>
        <button class="action-btn" onclick="resetStopwatch()">Reset</button>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Messages App -->
    <div class="app-screen" id="messages">
      <div class="app-content">
        <h2>Messages</h2>
        <div id="message-list">
          <p>Elon: Hey, how's it going?</p>
          <p>You: All good!</p>
        </div>
        <input type="text" id="message-input" placeholder="Type a message...">
        <button class="action-btn" onclick="sendMessage()">Send</button>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Browser App -->
    <div class="app-screen" id="browser">
      <div class="app-content">
        <h2>Browser</h2>
        <input type="text" id="browser-url" placeholder="Enter URL" value="https://www.google.com">
        <button class="action-btn" onclick="loadUrl()">Go</button>
        <iframe id="browser-frame" src="https://www.google.com" width="100%" height="400"></iframe>
        <button class="back-btn" onclick="backToHome()">Back</button>
      </div>
    </div>

    <!-- Dock -->
    <div class="dock">
      <div class="app-icon" onclick="openApp('contact')"><span>‚òéÔ∏è</span></div>
      <div class="app-icon" onclick="openApp('ai-bot')"><span>ü§ñ</span></div>
      <div class="app-icon" onclick="openApp('setting')"><span>‚öôÔ∏è</span></div>
      <div class="app-icon" onclick="openApp('messages')"><span>üí¨</span></div>
    </div>
  </div>

  <script>
    let tomatoScore = 0, tomatoHighScore = localStorage.getItem('tomatoHighScore') || 0;
    let notes = JSON.parse(localStorage.getItem('notes')) || [];
    let contacts = ['Robin: 123-456-7890', 'Elon: 234-567-8901', 'Boss: 345-678-9012', 'Wife: 456-789-0123', 'Friend: 567-890-1234'];
    let calcExpression = '';
    let alarms = [];
    let timerInterval, stopwatchInterval;
    let messages = ['Elon: Hey, how\'s it going?', 'You: All good!'];

    // Time and Date
    function updateTime() {
      const now = new Date();
      const timeStr = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
      const dateStr = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      document.getElementById('time').innerText = timeStr;
      document.getElementById('lock-time').innerText = timeStr;
      document.getElementById('lock-date').innerText = dateStr;
    }
    setInterval(updateTime, 1000);

    // Battery
    function updateBattery() {
      const battery = Math.floor(Math.random() * 100);
      document.getElementById('battery').innerText = `${battery}%`;
      document.getElementById('battery-status').innerText = `${battery}%`;
    }
    setInterval(updateBattery, 5000);

    // Lock/Unlock
    function unlockPhone() {
      const pin = document.getElementById('pin').value;
      if (pin === '1234' || !pin) {
        document.getElementById('lock-screen').style.display = 'none';
        document.getElementById('home').style.display = 'flex';
        showNotification('Phone Unlocked!');
      } else {
        showNotification('Incorrect PIN');
      }
    }
    function faceUnlock() {
      showNotification('Face Unlock Simulated');
      unlockPhone();
    }
    function emergencyCall() {
      showNotification('Emergency Call Initiated');
    }
    function lockPhone() {
      document.querySelectorAll('.app-screen').forEach(screen => {
        screen.style.display = 'none';
        screen.querySelector('.app-content').style.display = 'none';
      });
      document.getElementById('home').style.display = 'none';
      document.getElementById('lock-screen').style.display = 'flex';
      showNotification('Phone Locked');
    }

    // Notifications
    function showNotification(message) {
      const notif = document.getElementById('notification');
      notif.innerText = message;
      notif.style.display = 'block';
      setTimeout(() => notif.style.display = 'none', 3000);
    }

    // Quick Settings
    function toggleQuickSettings() {
      const qs = document.getElementById('quick-settings');
      qs.style.display = qs.style.display === 'block' ? 'none' : 'block';
    }

    // App Navigation
    function openApp(appId) {
      document.getElementById('home').style.display = 'none';
      document.getElementById(appId).style.display = 'block';
      document.querySelector(`#${appId} .app-content`).style.display = 'block';
      if (appId === 'camera') startCamera();
      if (appId === 'music') playSong();
      showNotification(`${appId.charAt(0).toUpperCase() + appId.slice(1)} opened`);
    }
    function backToHome() {
      document.querySelectorAll('.app-screen').forEach(screen => {
        screen.style.display = 'none';
        screen.querySelector('.app-content').style.display = 'none';
      });
      document.getElementById('home').style.display = 'flex';
      if (navigator.mediaDevices) navigator.getUserMedia({ video: true }).then(stream => stream.getTracks().forEach(track => track.stop()));
      showNotification('Returned to Home');
      toggleQuickSettings();
    }

    // App Search
    function searchApps() {
      const query = document.getElementById('app-search').value.toLowerCase();
      const apps = ['tomato', 'chart', 'contact', 'ai-bot', 'setting', 'camera', 'music', 'notes', 'calculator', 'weather', 'alarm', 'timer', 'stopwatch', 'messages', 'browser'];
      document.querySelectorAll('.app-icon').forEach(icon => {
        const appName = icon.querySelector('.app-name').innerText.toLowerCase();
        icon.style.display = appName.includes(query) ? 'flex' : 'none';
      });
    }

    // Context Menu
    function showContextMenu(e, appId) {
      e.preventDefault();
      const menu = document.getElementById('context-menu');
      menu.style.display = 'block';
      menu.style.left = `${e.clientX}px`;
      menu.style.top = `${e.clientY}px`;
      menu.dataset.appId = appId;
      setTimeout(() => menu.style.display = 'none', 2000);
    }
    function uninstallApp() {
      showNotification(`Uninstalled ${document.getElementById('context-menu').dataset.appId}`);
    }
    function appInfo() {
      showNotification(`Info: ${document.getElementById('context-menu').dataset.appId}`);
    }
    function addToFolder() {
      showNotification(`Added ${document.getElementById('context-menu').dataset.appId} to folder`);
    }

    // Tomato Game
    function playTomato() {
      const difficulty = document.getElementById('tomato-difficulty').value;
      tomatoScore += difficulty === 'easy' ? 1 : 2;
      document.getElementById('tomato-score').innerText = `Score: ${tomatoScore}`;
      if (tomatoScore > tomatoHighScore) {
        tomatoHighScore = tomatoScore;
        localStorage.setItem('tomatoHighScore', tomatoHighScore);
        document.getElementById('tomato-high-score').innerText = `High Score: ${tomatoHighScore}`;
      }
      showNotification('Tomato popped!');
    }
    function startTimeTrial() {
      showNotification('Time Trial Started!');
    }
    function resetTomato() {
      tomatoScore = 0;
      document.getElementById('tomato-score').innerText = `Score: 0`;
      showNotification('Score reset!');
    }
    function shareScore() {
      showNotification(`Shared score: ${tomatoScore}`);
    }

    // Chart App
    function updateChart() {
      const coin = document.getElementById('coin-select').value;
      document.getElementById('chart-frame').src = `https://www.coindesk.com/price/${coin}`;
    }
    function setPriceAlert() {
      showNotification('Price alert set!');
    }
    function addToWatchlist() {
      showNotification('Added to watchlist!');
    }

    // Contacts
    function searchContacts() {
      const query = document.getElementById('search-contact').value.toLowerCase();
      document.getElementById('contact-list').innerHTML = contacts
        .filter(c => c.toLowerCase().includes(query))
        .map(c => `<li>${c}</li>`).join('');
    }
    function addContact() {
      const newContact = document.getElementById('new-contact').value;
      if (newContact) {
        contacts.push(newContact);
        document.getElementById('contact-list').innerHTML = contacts.map(c => `<li>${c}</li>`).join('');
        document.getElementById('new-contact').value = '';
        showNotification('Contact added!');
      }
    }
    function videoCall() {
      showNotification('Video call initiated!');
    }

    // AI Bot
    function showBotChat() {
      const bot = document.getElementById('bot-select').value;
      const chats = {
        bot1: `<p>Grok: Ask me anything!</p><p>Q1: Weather? A: Sunny!</p><p>Q2: Food? A: Pizza!</p><p>Q3: Color? A: Blue!</p>`,
        bot2: `<p>Siri: Hello!</p><p>Q1: News? A: Tech news!</p><p>Q2: Hobby? A: Coding!</p><p>Q3: Dream? A: AI world!</p>`,
        bot3: `<p>Alexa: Yo!</p><p>Q1: Music? A: Rock!</p><p>Q2: Movie? A: Sci-fi!</p><p>Q3: Game? A: Chess!</p>`,
        bot4: `<p>Cortana: Hey there!</p><p>Q1: Travel? A: Paris!</p><p>Q2: Food? A: Sushi!</p><p>Q3: Sport? A: Soccer!</p>`,
        bot5: `<p>Bixby: Hi!</p><p>Q1: Book? A: Fantasy!</p><p>Q2: Pet? A: Dog!</p><p>Q3: Place? A: Beach!</p>`
      };
      document.getElementById('bot-chat').innerHTML = chats[bot];
    }
    function handleBotInput(e) {
      if (e.key === 'Enter') {
        const input = document.getElementById('bot-input').value;
        if (input) showNotification(`Asked: ${input}`);
        document.getElementById('bot-input').value = '';
      }
    }
    function voiceInput() {
      showNotification('Voice input activated!');
    }
    function quickCommand() {
      showNotification('Quick command executed!');
    }

    // Settings
    function toggleTheme() {
      document.body.classList.toggle('white-theme');
      document.body.classList.add('theme-animation');
      setTimeout(() => document.body.classList.remove('theme-animation'), 600);
      showNotification('Theme changed!');
    }
    function setCustomDate() {
      const date = document.getElementById('custom-date').value;
      document.getElementById('lock-date').innerText = date;
      showNotification('Date updated!');
    }
    function toggleWifi() {
      const wifi = document.getElementById('wifi-toggle').checked;
      document.getElementById('wifi').innerText = wifi ? 'üì°' : 'üîå';
      showNotification(`Wi-Fi ${wifi ? 'On' : 'Off'}`);
    }
    function toggleBluetooth() {
      const bt = document.getElementById('bluetooth-toggle').checked;
      document.getElementById('bluetooth').innerText = bt ? 'üîµ' : '';
      showNotification(`Bluetooth ${bt ? 'On' : 'Off'}`);
    }
    function toggleAirplane() {
      const airplane = document.getElementById('airplane-mode').checked;
      document.getElementById('airplane').innerText = airplane ? '‚úàÔ∏è' : '';
      showNotification(`Airplane Mode ${airplane ? 'On' : 'Off'}`);
    }
    function adjustVolume() {
      showNotification(`Volume: ${document.getElementById('volume').value}%`);
    }
    function changeWallpaper() {
      const wp = document.getElementById('wallpaper').value;
      const wallpapers = { '1': 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c', '2': 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e', '3': 'https://images.unsplash.com/photo-1516321310763-38386f5c1b6d' };
      document.getElementById('lock-screen').style.backgroundImage = `url(${wallpapers[wp]})`;
      showNotification('Wallpaper changed!');
    }
    function changeFontSize() {
      const size = document.getElementById('font-size').value;
      document.querySelector('.phone').style.fontSize = `${size}px`;
      showNotification(`Font size: ${size}px`);
    }
    function toggleLocation() {
      showNotification(`Location ${document.getElementById('location-toggle').checked ? 'On' : 'Off'}`);
    }
    function toggleBatterySaver() {
      showNotification(`Battery Saver ${document.getElementById('battery-saver').checked ? 'On' : 'Off'}`);
    }
    function resetSettings() {
      showNotification('Settings reset!');
    }
    function checkUpdate() {
      showNotification('No updates available');
    }

    // Camera
    function startCamera() {
      const video = document.getElementById('camera-feed');
      if (navigator.mediaDevices) {
        navigator.mediaDevices.getUserMedia({ video: true })
          .then(stream => video.srcObject = stream)
          .catch(() => showNotification('Camera access denied'));
      }
    }
    function capturePhoto() {
      showNotification('Photo captured!');
    }
    function switchCamera() {
      showNotification('Camera switched!');
    }

    // Music
    function playSong() {
      const song = document.getElementById('song-select').value;
      const songs = {
        song1: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',
        song2: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3',
        song3: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3',
        song4: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3',
        song5: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3',
        song6: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3'
      };
      const player = document.getElementById('music-player');
      player.src = songs[song];
      player.play();
      showNotification(`Playing ${song}`);
    }
    function toggleShuffle() {
      showNotification('Shuffle toggled!');
    }
    function toggleRepeat() {
      showNotification('Repeat toggled!');
    }
    function addToPlaylist() {
      showNotification('Added to playlist!');
    }

    // Notes
    function saveNote() {
      const note = document.getElementById('note-text').value;
      if (note) {
        notes.push(note);
        localStorage.setItem('notes', JSON.stringify(notes));
        document.getElementById('notes-list').innerHTML = notes.map(n => `<p>${n}</p>`).join('');
        document.getElementById('note-text').value = '';
        showNotification('Note saved!');
      }
    }

    // Calculator
    function calc(value) {
      if (value === 'C') {
        calcExpression = '';
      } else if (value === '=') {
        try {
          calcExpression = eval(calcExpression);
        } catch {
          calcExpression = 'Error';
        }
      } else {
        calcExpression += value;
      }
      document.getElementById('calc-display').value = calcExpression;
    }

    // Weather
    function refreshWeather() {
      showNotification('Weather refreshed!');
    }

    // Alarm
    function setAlarm() {
      const time = document.getElementById('alarm-time').value;
      if (time) {
        alarms.push(time);
        document.getElementById('alarm-list').innerHTML = alarms.map(a => `<p>Alarm: ${a}</p>`).join('');
        showNotification(`Alarm set for ${time}`);
      }
    }

    // Timer
    function startTimer() {
      const minutes = parseInt(document.getElementById('timer-minutes').value) * 60;
      let timeLeft = minutes;
      clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          showNotification('Timer finished!');
        }
        document.getElementById('timer-display').innerText = `${Math.floor(timeLeft / 60)}:${(timeLeft % 60).toString().padStart(2, '0')}`;
        timeLeft--;
      }, 1000);
    }
    function pauseTimer() {
      clearInterval(timerInterval);
      showNotification('Timer paused!');
    }

    // Stopwatch
    let stopwatchTime = 0;
    function startStopwatch() {
      clearInterval(stopwatchInterval);
      stopwatchInterval = setInterval(() => {
        stopwatchTime++;
        const hours = Math.floor(stopwatchTime / 3600);
        const minutes = Math.floor((stopwatchTime % 3600) / 60);
        const seconds = stopwatchTime % 60;
        document.getElementById('stopwatch-display').innerText = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      }, 1000);
    }
    function stopStopwatch() {
      clearInterval(stopwatchInterval);
      showNotification('Stopwatch stopped!');
    }
    function resetStopwatch() {
      stopwatchTime = 0;
      document.getElementById('stopwatch-display').innerText = '00:00:00';
      showNotification('Stopwatch reset!');
    }

    // Messages
    function sendMessage() {
      const message = document.getElementById('message-input').value;
      if (message) {
        messages.push(`You: ${message}`);
        document.getElementById('message-list').innerHTML = messages.map(m => `<p>${m}</p>`).join('');
        document.getElementById('message-input').value = '';
        showNotification('Message sent!');
      }
    }

    // Browser
    function loadUrl() {
      const url = document.getElementById('browser-url').value;
      document.getElementById('browser-frame').src = url;
      showNotification(`Loaded ${url}`);
    }

    // Initialize
    updateTime();
    updateBattery();
    document.getElementById('tomato-high-score').innerText = `High Score: ${tomatoHighScore}`;
    document.getElementById('notes-list').innerHTML = notes.map(n => `<p>${n}</p>`).join('');
    document.getElementById('alarm-list').innerHTML = alarms.map(a => `<p>Alarm: ${a}</p>`).join('');
    document.getElementById('message-list').innerHTML = messages.map(m => `<p>${m}</p>`).join('');
  </script>
</body>
</html>
