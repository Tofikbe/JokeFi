<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pro Mobile Editor</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.2.4/fabric.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Oswald&family=Pacifico&family=Lobster&family=Anton&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      background: #0d1117;
      color: white;
      font-family: 'Roboto', sans-serif;
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }
    header {
      background: #161b22;
      padding: 12px;
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      border-bottom: 1px solid #30363d;
    }
    #canvas-container {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #0d1117;
    }
    canvas {
      border: 1px solid #30363d;
      border-radius: 8px;
    }
    .toolbar {
      display: flex;
      justify-content: space-around;
      background: #161b22;
      padding: 8px;
      border-top: 1px solid #30363d;
    }
    .toolbar button, .toolbar input, .toolbar select {
      background: #21262d;
      border: none;
      color: white;
      padding: 8px;
      border-radius: 6px;
      font-size: 12px;
    }
    .sticker-bar {
      overflow-x: auto;
      white-space: nowrap;
      background: #0d1117;
      padding: 6px;
      border-top: 1px solid #30363d;
    }
    .sticker-bar img {
      width: 48px;
      height: 48px;
      margin: 0 4px;
      border-radius: 6px;
      background: #161b22;
      padding: 4px;
    }
  </style>
</head>
<body>
  <header>ðŸ”¥ Mobile Pro Editor</header>

  <div id="canvas-container">
    <canvas id="c" width="320" height="480"></canvas>
  </div>

  <!-- Sticker bar -->
  <div class="sticker-bar" id="stickers">
    <!-- Stickers will load here -->
  </div>

  <!-- Toolbar -->
  <div class="toolbar">
    <input type="file" id="upload" accept="image/*">
    <button onclick="addText()">Text</button>
    <select id="fontSelect" onchange="changeFont(this.value)">
      <option value="Roboto">Roboto</option>
      <option value="Oswald">Oswald</option>
      <option value="Pacifico">Pacifico</option>
      <option value="Lobster">Lobster</option>
      <option value="Anton">Anton</option>
    </select>
    <label>Bright <input type="range" id="brightness" min="-1" max="1" step="0.1" value="0"></label>
    <label>Contrast <input type="range" id="contrast" min="-1" max="1" step="0.1" value="0"></label>
    <button onclick="removeSelected()">Delete</button>
    <button onclick="exportCanvas()">Save</button>
  </div>

  <script>
    const canvas = new fabric.Canvas('c', {
      backgroundColor: '#fff',
      selection: true
    });

    // Image upload
    document.getElementById('upload').onchange = function(e) {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.onload = function(f) {
        fabric.Image.fromURL(f.target.result, function(img) {
          img.scaleToWidth(200);
          canvas.add(img).setActiveObject(img);
        });
      };
      reader.readAsDataURL(file);
    };

    // Add text
    function addText() {
      const text = new fabric.IText("Edit Me", {
        left: 50, top: 50,
        fill: "#000", fontFamily: "Roboto",
        fontSize: 24
      });
      canvas.add(text).setActiveObject(text);
    }

    // Change font
    function changeFont(font) {
      const obj = canvas.getActiveObject();
      if (obj && obj.type === 'i-text') {
        obj.set("fontFamily", font);
        canvas.renderAll();
      }
    }

    // Delete
    function removeSelected() {
      canvas.remove(canvas.getActiveObject());
    }

    // Save
    function exportCanvas() {
      const dataURL = canvas.toDataURL({
        format: 'png',
        quality: 1
      });
      const link = document.createElement('a');
      link.href = dataURL;
      link.download = "edited.png";
      link.click();
    }

    // Brightness/Contrast
    let activeFilter = {};
    function applyFilters() {
      const obj = canvas.getActiveObject();
      if (obj && obj.type === "image") {
        obj.filters = [];
        if (activeFilter.brightness) {
          obj.filters.push(new fabric.Image.filters.Brightness({brightness: activeFilter.brightness}));
        }
        if (activeFilter.contrast) {
          obj.filters.push(new fabric.Image.filters.Contrast({contrast: activeFilter.contrast}));
        }
        obj.applyFilters();
        canvas.renderAll();
      }
    }
    document.getElementById("brightness").oninput = function() {
      activeFilter.brightness = parseFloat(this.value);
      applyFilters();
    };
    document.getElementById("contrast").oninput = function() {
      activeFilter.contrast = parseFloat(this.value);
      applyFilters();
    };

    // Stickers (Crypto + X logos)
    const stickers = [
      "https://cryptologos.cc/logos/bitcoin-btc-logo.png",
      "https://cryptologos.cc/logos/ethereum-eth-logo.png",
      "https://cryptologos.cc/logos/aptos-apt-logo.png",
      "https://cryptologos.cc/logos/solana-sol-logo.png",
      "https://cryptologos.cc/logos/cardano-ada-logo.png",
      "https://cryptologos.cc/logos/tether-usdt-logo.png",
      "https://cryptologos.cc/logos/dogecoin-doge-logo.png",
      "https://cryptologos.cc/logos/xrp-xrp-logo.png",
      "https://cryptologos.cc/logos/shiba-inu-shib-logo.png",
      "https://cryptologos.cc/logos/polkadot-new-dot-logo.png",
      "https://cryptologos.cc/logos/tron-trx-logo.png",
      "https://cryptologos.cc/logos/chainlink-link-logo.png",
      "https://cryptologos.cc/logos/litecoin-ltc-logo.png",
      "https://cryptologos.cc/logos/uniswap-uni-logo.png",
      "https://cryptologos.cc/logos/near-protocol-near-logo.png",
      "https://cryptologos.cc/logos/arbitrum-arb-logo.png",
      "https://cryptologos.cc/logos/optimism-ethereum-op-logo.png",
      "https://cryptologos.cc/logos/avalanche-avax-logo.png",
      "https://cryptologos.cc/logos/twitter-x-logo.png",
      "https://cryptologos.cc/logos/base-base-logo.png"
    ];

    const stickerBar = document.getElementById("stickers");
    stickers.forEach(url => {
      const img = document.createElement("img");
      img.src = url;
      img.onclick = () => {
        fabric.Image.fromURL(url, function(sticker) {
          sticker.scaleToWidth(60);
          canvas.add(sticker).setActiveObject(sticker);
        });
      };
      stickerBar.appendChild(img);
    });
  </script>
</body>
</html>
